'use client'; import { useRouter } from 'next/navigation'; import { useState } from 'react'; export default function ProductForm({ product }:{ product?:any }){ const [form,setForm]=useState<any>(product||{ name:'', slug:'', shape:'square', sizeMM:40, description:'', basePriceCents:1999, colors:['white','black','lime','orange','blue','yellow'], epoxyEnabled:true }); const router=useRouter(); function set(k:string,v:any){ setForm((f:any)=>({...f,[k]:v})); } async function save(){ const res=await fetch('/api/admin/product',{ method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify(form) }); if(res.ok) router.push('/admin/products'); else alert('Fehler'); } return (<div className='max-w-2xl card grid gap-3'><h1 className='text-xl font-semibold'>{product?'Produkt bearbeiten':'Neues Produkt'}</h1><div><label>Name</label><input value={form.name} onChange={e=>set('name',e.target.value)} /></div><div><label>Slug</label><input value={form.slug} onChange={e=>set('slug',e.target.value)} /></div><div><label>Form</label><select value={form.shape} onChange={e=>set('shape',e.target.value)}><option value='square'>Quadrat</option></select></div><div><label>Größe (mm)</label><input type='number' value={form.sizeMM} onChange={e=>set('sizeMM',Number(e.target.value)||0)} /></div><div><label>Beschreibung</label><textarea value={form.description} onChange={e=>set('description',e.target.value)} /></div><div><label>Basispreis (Cent)</label><input type='number' value={form.basePriceCents} onChange={e=>set('basePriceCents',Number(e.target.value)||0)} /></div><div><label>Farben (Kommagetrennt)</label><input value={form.colors.join(',')} onChange={e=>set('colors',e.target.value.split(',').map((s:string)=>s.trim()).filter(Boolean))} /></div><div><label>Epoxidharz aktiv</label><input type='checkbox' checked={!!form.epoxyEnabled} onChange={e=>set('epoxyEnabled',e.target.checked)} /></div><div className='flex gap-2'><button className='btn' onClick={save}>Speichern</button><button className='btn secondary' onClick={()=>history.back()}>Zurück</button></div></div>); }