import { NextRequest, NextResponse } from 'next/server'; import { prisma } from '@/lib/db'; export async function POST(req: NextRequest){ const data=await req.json(); if(!data.slug) return NextResponse.json({error:'slug required'},{status:400}); const exists=await prisma.product.findUnique({ where:{ slug:data.slug } }); if(exists){ await prisma.product.update({ where:{ slug:data.slug }, data }); } else { await prisma.product.create({ data }); } return NextResponse.json({ ok:true }); }